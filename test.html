<!DOCTYPE html>
<html lang="en">
<head>

    <meta name="viewport" content="width=device-width, initial-scale=1.0">

    <link rel="stylesheet" type="text/css" href="MainFrameLook.css">

    <link rel="shortcut icon" type="image/png" href="img/icon.png">

    <meta charset="UTF-8">

    <title>Test Page</title>

</head>
<body>

<header>
    <h1>TestPage & TeamNotes </h1>
</header>


<a>That test launch Answer call. This test proves that program can process(dynamically) all available out puts from the server.</a>
<table id="OutputAnswer">
    <tr>
        <th> Corrrect </th>
        <th> Completed </th>
    </tr>
</table>
<a><input type="button" value="Switch" onclick="answer()" class="button" /></a>

<a>That test launch Score call. This test proves that program can process(dynamically) all available out puts from the server.</a>
<table id="OutputScore">
    <tr>
        <th> Finished </th>
        <th> Completed </th>
        <th> Error </th>
        <th> Message </th>
    </tr>
</table>
<a><input type="button" value="Switch" onclick="score()" class="button" /></a>

<a>That test launch LeaderBoard call. This test proves that program can process(dynamically) all available out puts from the server.</a>
<table id="OutputLeaderBoard">
    <tr>
        <th> Name </th>
        <th> Score </th>
        <th> Time </th>
        <th> Prize </th>
    </tr>
</table>
<a><input type="button" value="Switch" onclick="leaderboard()" class="button" /></a>

<script>
function CallListFromButton(){
    list();
}


    function list(){
        let TreasureHuntslist = document.getElementById("OutputList");
        fetch("https://codecyprus.org/th/test-api/list?number-of-ths=5")

            .then(response => response.json()) //Parse JSON text to JavaScript object
            .then(jsonObject => {

                let TreasureHuntsOBJECT = jsonObject.treasureHunts;
                for (let i = 0; i < TreasureHuntsOBJECT.length; i++) {

                    UUID = TreasureHuntsOBJECT[i].uuid;

                    NameOfHunts = TreasureHuntsOBJECT[i].name;

                    let HuntOptions = document.createElement("li");

                    HuntOptions.innerHTML = "<a>" + NameOfHunts + "</a>";

                    TreasureHuntslist.appendChild(HuntOptions);
                }
            });
    }






    function start(){
        let Start_Api= "https://codecyprus.org/th/test-api/start?player=";
        let arr=["inactive","empty","player","app","unknown","missing_parameter", ""];
        let TreasureHuntslist = document.getElementById("OutputStart");

        for(let i = 0; i<=6;i++){

            fetch(Start_Api+arr[i])
                .then(response => response.json()) //Parse JSON text to JavaScript object
                .then(jsonObject => {


                    let Session = jsonObject.status;
                    if(Session ==="ERROR"){//mistake check
                        let HuntOptions = document.createElement("li");
                        HuntOptions.innerHTML = "<a>" + jsonObject.errorMessages[0] + "</a>";
                        TreasureHuntslist.appendChild(HuntOptions);
                        console.log(jsonObject.errorMessages[0]);}
                    else{
                        console.log(jsonObject.session);   //Ok!
                    }
                });
        }
    }










    function question () {
        const  Questions_Api = "https://codecyprus.org/th/test-api/question?";
        let All=["question-type=BOOLEAN", "question-type=MCQ", "question-type=INTEGER", "question-type=NUMERIC","question-type=TEXT",
            "question-type=BOOLEAN&can-be-skipped", "question-type=MCQ&can-be-skipped", "question-type=INTEGER&can-be-skipped", "question-type=NUMERIC&can-be-skipped","question-type=TEXT&can-be-skipped",
            "question-type=BOOLEAN&requires-location", "question-type=MCQ&requires-location", "question-type=INTEGER&requires-location", "question-type=NUMERIC&requires-location","question-type=TEXT&requires-location",
            "question-type=BOOLEAN&can-be-skipped&requires-location", "question-type=MCQ&can-be-skipped&requires-location", "question-type=INTEGER&can-be-skipped&requires-location", "question-type=NUMERIC&can-be-skipped&requires-location","question-type=TEXT&can-be-skipped&requires-location",
            "completed&question-type=BOOLEAN", "completed&question-type=MCQ", "completed&question-type=INTEGER", "completed&question-type=NUMERIC","completed&question-type=TEXT",
            "completed&question-type=BOOLEAN&can-be-skipped", "completed&question-type=MCQ&can-be-skipped", "completed&question-type=INTEGER&can-be-skipped", "completed&question-type=NUMERIC&can-be-skipped","completed&question-type=TEXT&can-be-skipped",
            "completed&question-type=BOOLEAN&requires-location", "completed&question-type=MCQ&requires-location", "completed&question-type=INTEGER&requires-location", "completed&question-type=NUMERIC&requires-location","completed&question-type=TEXT&requires-location",
            "completed&question-type=BOOLEAN&can-be-skipped&requires-location", "completed&question-type=MCQ&can-be-skipped&requires-location", "completed&question-type=INTEGER&can-be-skipped&requires-location", "completed&question-type=NUMERIC&can-be-skipped&requires-location","completed&question-type=TEXT&can-be-skipped&requires-location"];

        let TreasureHuntslist = document.getElementById("OutputQuestion");

        for (let i = 0;i < All.length;i++){
        fetch( Questions_Api+All[i] )
            .then(response => response.json()) //Parse JSON text to JavaScript object
            .then(jsonObject => {

                console.log(jsonObject);
                let  CheckIfFinished = jsonObject.completed;

                let QuestionNames = jsonObject.questionText;

                let  CheckQuestion = jsonObject.questionType;

                CheckLocation = jsonObject.requiresLocation;

                CheckForSkip = jsonObject.canBeSkipped;




                let Tr = document.createElement("tr");
                console.log( Tr);
                console.log(TreasureHuntslist);

                TreasureHuntslist.appendChild(Tr);

                let Td = document.createElement("td");
                let Td1 = document.createElement("td");
                let Td2 = document.createElement("td");
                let Td3 = document.createElement("td");









                if (CheckQuestion === "INTEGER")
                {

                    Td.innerHTML = "<a>INTEGER</a>";
                    Tr.appendChild(Td);



                }

                if (CheckQuestion === "BOOLEAN")
                {

                    Td.innerHTML = "<a>BOOLEAN</a>";
                    Tr.appendChild(Td);




                }
                if (CheckQuestion === "MCQ")
                {
                    Td.innerHTML = "<a>MCQ</a>";
                    Tr.appendChild(Td);


                }

                if (CheckQuestion === "TEXT")
                {

                    Td.innerHTML = "<a>TEXT</a>";
                    Tr.appendChild(Td);




                }

                if (CheckQuestion === "NUMERIC")
                {

                    Td.innerHTML = "<a>NUMERIC</a>";
                    Tr.appendChild(Td);



                }
                if (CheckIfFinished === true ){

                    Td1.innerHTML = "<a>Move to LeaderBoard(Finished)</a>";
                    Tr.appendChild(Td1);

                }

                if(CheckIfFinished === false){

                        Td1.innerHTML = "<a>Don't move to LeaderBoard(Not Finished)</a>";
                    Tr.appendChild(Td1);
                    }


                if (CheckLocation === true) {

                    Td2.innerHTML = "<a>Need Location</a>";
                    Tr.appendChild(Td2);


                }
                if (CheckLocation === false) {

                    Td2.innerHTML = "<a>Don't need Location</a>";
                    Tr.appendChild(Td2);


                }

                if (CheckForSkip === true){


                    Td3.innerHTML = "<a>Can be Skiped</a>";
                    Tr.appendChild(Td3);
                }else {

                    Td3.innerHTML = "<a>Can Not be Skiped</a>";
                    Tr.appendChild(Td3);
                }





            });


    }}














    function answer(){
        let TreasureHuntslist = document.getElementById("OutputAnswer");
        const  Answers_Api = "https://codecyprus.org/th/test-api/answer?";
        let Array=["correct&completed=false","correct&completed=true","completed=false", "completed=true"];

        for(let i =0;i<Array.length;i++){
        fetch( Answers_Api+Array[i] )
        .then(response => response.json()) //Parse JSON text to JavaScript object
        .then(jsonObject => {

            let Tr = document.createElement("tr");
            TreasureHuntslist.appendChild(Tr);

            let Td = document.createElement("td");
            let Td1 = document.createElement("td");

            Tr.appendChild(Td);
            Td.innerHTML = "<a>"+jsonObject.correct+"</a>";
            Tr.appendChild(Td1);
            Td1.innerHTML = "<a>"+jsonObject.completed+"</a>";

        })
        }
    }












    function score(){
        let TreasureHuntslist = document.getElementById("OutputScore");
        let Array=["score=42","finished&score=42","completed&score=42","completed&finished&score=42", "error" ];
        for(let i =0;i<Array.length;i++){

        fetch("https://codecyprus.org/th/test-api/score?"+ Array[i])
            .then(response => response.json()) //Parse JSON text to JavaScript object
            .then(jsonObject => {
                let Tr = document.createElement("tr");
                TreasureHuntslist.appendChild(Tr);

                let Td = document.createElement("td");
                let Td1 = document.createElement("td");
                let Td2 = document.createElement("td");
                let Td3 = document.createElement("td");
                Tr.appendChild(Td);
                Tr.appendChild(Td1);
                Tr.appendChild(Td2);
                Tr.appendChild(Td3);

if (jsonObject.status==="OK") {

    Td.innerHTML = "<a>"+jsonObject.finished+"</a>";
    Td1.innerHTML = "<a>"+jsonObject.completed+"</a>";
    Td2.innerHTML = "<a>No</a>";
    Td3.innerHTML = "<a>-</a>";

}
else{
    Td.innerHTML = "<a>-</a>";
    Td1.innerHTML = "<a>-</a>";
    Td2.innerHTML = "<a>Yes</a>";
    Td3.innerHTML = "<a>"+jsonObject.errorMessages+"</a>";
    console.log(jsonObject);


}

            })
        }
    }












    function leaderboard(){
        let TreasureHuntslist = document.getElementById("OutputLeaderBoard");
        let arr =["sorted&size=1","sorted&hasPrize&size=1","hasPrize&size=1"];
        for(let i =0;i<arr.length;i++){
        fetch("https://codecyprus.org/th/test-api/leaderboard?"+ arr[i])
            .then(response => response.json()) //Parse JSON text to JavaScript object
            .then(jsonObject => {

                let Tr = document.createElement("tr");
                TreasureHuntslist.appendChild(Tr);


                console.log( jsonObject);
                let Td = document.createElement("td");
                let Td1 = document.createElement("td");
                let Td2 = document.createElement("td");
                let Td3 = document.createElement("td");
                Tr.appendChild(Td);
                Tr.appendChild(Td1);
                Tr.appendChild(Td2);
                Tr.appendChild(Td3);
                Td.innerHTML = "<a>"+jsonObject.leaderboard[0].player+"</a>";
                Td1.innerHTML = "<a>"+jsonObject.leaderboard[0].score+"</a>";
                Td2.innerHTML = "<a>"+jsonObject.leaderboard[0].completionTime+"</a>";
                Td3.innerHTML = "<a>"+jsonObject.hasPrize+"</a>";

            });
    }}







</script>




<main>
<div class="box">
    <h2>Test scetion</h2>
</div>

<div class="box">

    <div class="boxtest">
        <h2>Here is you can test the features of our site! This page use the parts of the real code to test.
            That test launch list call, and out put information about treasure, it read .name and out put this part.</h2>
        <ol id="OutputList"></ol>
        <p><input type="button" value="Switch" onclick="CallListFromButton()" class="button" /></p>
    </div>

    <div class="boxtest">
        <h2>That test launch start call. This test proves that program can process(dynamically) all available out puts from the server.</h2>
        <ul id="OutputStart"></ul>
        <p><input type="button" value="Switch" onclick="start()" class="button" /></p>
    </div>

    <div class="boxtest">
        <h2>That test launch question call. This test proves that program can process(dynamically) all available out puts from the server.</h2>
        <table id="OutputQuestion" width="100%">
            <tr>
                <th> Type? </th>
                <th> Finished? </th>
                <th> Location? </th>
                <th> Skip? </th>


            </tr>
        </table>
        <br/>
        <p><input type="button" value="Switch" onclick="question()" class="button" /></p>

    </div>






</div>


<div class="box">
    <h2>Notes section</h2>
</div>

<div class="box">
    <div class="boxtest">
        <p>We are:</p>
        <ul>
            <li>-Andrew Bilyk</li>

            <li>-Vasily Ivanov</li>
        </ul>
        <br/>
    </div>

    <div class="boxtest">
        <h2>Meeting 1</h2>
        <p>Decide how the application should looks like.
            This is the end of the first meeting.</p>
        <br/>
    </div>

    <div class="boxtest">
        <h2> Meeting 2</h2>
        <p>Decide how each element of the program should work.
            This is the end of the second meeting.</p>

        <br/>
    </div>

    <div class="boxtest">
        <h2>Meeting 3</h2>


        <p>Devide the work... Andrew Bilyk created /th/api/list call. Vasily Ivanov create a prototype of  /th/api/leaderboard call.
            This is the end of the meeting 3.</p>

        <br/>
    </div>
    <div class="boxtest">
        <h2>Meeting 4</h2>

        <p>Work a few hours together to achieve a good work of /th/api/question call. This is the end of the meeting 4.</p>

        <br/>
    </div>
    <div class="boxtest">
        <h2>Meeting 5</h2>
        <p>Build all functions together. This is the end of the meeting 5.</p>

        <br/>
    </div>
    <div class="boxtest">
        <h2>Meeting 6</h2>
        <p>Andrew Bilyk add to the app the /th/api/score call and /th/api/skip call. This is the end of the meeting 6.</p>

        <br/>
    </div>
    <div class="boxtest">
        <h2>Meeting 7</h2>
        <p>Andrew Bilyk add to the app the /th/api/location call.This is the end of the meeting 7.</p>

        <br/>

    </div>
    <div class="boxtest">
        <h2>Meeting 8</h2>
        <p>Vasily Ivanov create a clear Notes page. Vasily Ivanov and Andrew Bilyk build all parts of the program together. This is the end of the meeting 8.</p>

        <br/>
    </div>
    <div class="boxtest">
        <h2>Meeting 9</h2>
        <p>Vasily Ivanov create a QR code function.This is the end of the meeting 9.</p>

        <br/>
    </div>

</div>
</main>
</body>
</html>